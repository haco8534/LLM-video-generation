{
  "segments": [
    {
      "id": 1,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "surprised",
        "text": "逆平方根って何なのだ？ボクには\n難しいのだ。"
      }
    },
    {
      "id": 2,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal1",
        "text": "逆平方根とは「1を√xで割る」こと\nですわよ。例えば速さの計算で使いますわ。"
      }
    },
    {
      "id": 3,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "normal2",
        "text": "なるほど、1をルートで割るのか。でも\nなんでゲームで必要なのだ？"
      }
    },
    {
      "id": 4,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal3",
        "text": "3Dの光や向きの計算でベクトルの長さを\nすぐ求めたい時に便利ですの。"
      }
    },
    {
      "id": 5,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "surprised",
        "text": "たった数行で速く計算できるって本当\nなのだ？"
      }
    },
    {
      "id": 6,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal4",
        "text": "はい、秘密はビット演算と近似値を使う\nから高速なのですわ。"
      }
    },
    {
      "id": 7,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "surprised",
        "text": "ビット演算がどう役立つのだ？そんなこと\nあるのだ？"
      }
    },
    {
      "id": 8,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal1",
        "text": "数値の中身を直接操作して初期値を素早く\n推測するのですわ。"
      }
    },
    {
      "id": 9,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "normal2",
        "text": "へえ、そうして近似から正確に直すのだね？"
      }
    },
    {
      "id": 10,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal3",
        "text": "そうですわ、ニュートン法を使いながら精度を\n高めますのよ。"
      }
    },
    {
      "id": 11,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "surprised",
        "text": "高速逆平方根アルゴリズムは\nQuake IIIで話題になったのだ？"
      }
    },
    {
      "id": 12,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal1",
        "text": "そうですわ。3Dゲームで速さが\n命だった時代ですのよ。"
      }
    },
    {
      "id": 13,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "normal2",
        "text": "従来の逆平方根計算って\n何が問題だったのだ？"
      }
    },
    {
      "id": 14,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal3",
        "text": "計算が重く、リアルタイム処理に\n遅延が出やすかったのですわ。"
      }
    },
    {
      "id": 15,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "normal4",
        "text": "どうやってその問題を解決したのだ？"
      }
    },
    {
      "id": 16,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal1",
        "text": "初歩的な近似値とビット演算で\n高速化を図ったのですわね。"
      }
    },
    {
      "id": 17,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "normal2",
        "text": "当時のハードはどんな環境だったのだ？"
      }
    },
    {
      "id": 18,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal3",
        "text": "浮動小数点演算が遅く、工夫が\n求められたから生まれたのですわ。"
      }
    },
    {
      "id": 19,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "normal4",
        "text": "つまり制約がアイデアの母だったのだ？"
      }
    },
    {
      "id": 20,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal1",
        "text": "まさにその通り。制限が革新的手法を\n促したのですわよ。"
      }
    },
    {
      "id": 21,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "surprised",
        "text": "ビット操作で魔法の数って\n何なのだ？"
      }
    },
    {
      "id": 22,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal1",
        "text": "それは浮動小数点の裏技ですわよ。"
      }
    },
    {
      "id": 23,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "normal2",
        "text": "浮動小数点の裏技って\nどういうことなのだ？"
      }
    },
    {
      "id": 24,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal3",
        "text": "数値のビットを直接操作し、\n近似計算を高速化するのですわ。"
      }
    },
    {
      "id": 25,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "normal4",
        "text": "魔法の数0x5f3759dfはどんな\n意味があるのだ？"
      }
    },
    {
      "id": 26,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal1",
        "text": "これは逆平方根近似の秘密の鍵の\nような数ですわね。"
      }
    },
    {
      "id": 27,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "normal2",
        "text": "どうしてそんな特別な数に\nなるのだ？"
      }
    },
    {
      "id": 28,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal3",
        "text": "浮動小数点の指数部の調整と誤差の均衡を\n巧みに取っているのですわ。"
      }
    },
    {
      "id": 29,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "normal4",
        "text": "近似の精度はどうやって\n高めるのだ？"
      }
    },
    {
      "id": 30,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal1",
        "text": "ニュートン法を使い、一回の計算で\nグンと良くなるのですわ。"
      }
    },
    {
      "id": 31,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "worry",
        "text": "ニュートン法って難しそうだけど\n簡単なのだ？"
      }
    },
    {
      "id": 32,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal2",
        "text": "例えるなら曲線に接線を引いて\n答えに近づく反復法ですわよ。"
      }
    },
    {
      "id": 33,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "surprised",
        "text": "高速逆平方根って、ゲーム以外でも\n使われてるのだ？"
      }
    },
    {
      "id": 34,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal1",
        "text": "ええ、物理シミュレーションや機械学習でも\n重要ですわよ。例えば、ベクトルの正規化に使われますの。"
      }
    },
    {
      "id": 35,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "surprised",
        "text": "なるほど！速く計算できるから\nシミュレーションがスムーズになるのだね？"
      }
    },
    {
      "id": 36,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal2",
        "text": "その通りですわ。GPUの専用命令で\nさらに高速化されていますのよ。"
      }
    },
    {
      "id": 37,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "surprised",
        "text": "専用命令があるなんて驚きなのだ！\n他にはどんな最適化があるのだ？"
      }
    },
    {
      "id": 38,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal3",
        "text": "誤差を許容して近似を使い、処理速度を\n優先するトレンドがありますわね。"
      }
    },
    {
      "id": 39,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "worry",
        "text": "でも、誤差が大きすぎると困るのだ？"
      }
    },
    {
      "id": 40,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal4",
        "text": "そうですわ。限界があり、正確さが求められる\n場面では代替手法が検討されておりますの。"
      }
    },
    {
      "id": 41,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "surprised",
        "text": "代替手法って具体的には何かあるのだ？"
      }
    },
    {
      "id": 42,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal1",
        "text": "例えば、Newton法の改良版や機械学習で\n近似する方法などですわ。"
      }
    },
    {
      "id": 43,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "surprised",
        "text": "そんなことあるのだ？機械学習が計算にも\n使われるなんて面白いのだ！"
      }
    },
    {
      "id": 44,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "surprised",
        "text": "高速逆平方根アルゴリズムって、\nたった数行で何ができるのだ？"
      }
    },
    {
      "id": 45,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal1",
        "text": "驚くべきは、短いコードで逆平方根を\n超高速に計算できることですわよ。"
      }
    },
    {
      "id": 46,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "normal2",
        "text": "逆平方根って、例えば何に使うのだ？"
      }
    },
    {
      "id": 47,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal3",
        "text": "3Dゲームの光の反射や物理計算で、\n速度が求められる場面によく使われるのですわ。"
      }
    },
    {
      "id": 48,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "normal4",
        "text": "なるほど、昔から使われてるのかしら？"
      }
    },
    {
      "id": 49,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal1",
        "text": "はい、この技術は1999年に登場し、\n数値計算の革新をもたらしましたわ。"
      }
    },
    {
      "id": 50,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "surprised",
        "text": "そんなに歴史があるとは知らなかったのだ。\n今も使われてるの？"
      }
    },
    {
      "id": 51,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal2",
        "text": "現代の多くの高速計算にも影響を与え、\n数学と技術の融合の象徴ですわね。"
      }
    },
    {
      "id": 52,
      "type": "dialogue",
      "script": {
        "speaker": "2",
        "face": "normal3",
        "text": "未来でも、こういう技術は進化し続けるのだ？"
      }
    },
    {
      "id": 53,
      "type": "dialogue",
      "script": {
        "speaker": "1",
        "face": "normal4",
        "text": "ええ、数学とテクノロジーが結びつく限り、\nこのアルゴリズムは輝き続けるでしょうよ。"
      }
    }
  ]
}